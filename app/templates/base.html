<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <title>ุฏูุฑู ุงูุฎูุงุณู - Fantasy Football</title>

    <!-- Google Fonts: Cairo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/static/css/style.css?v=3.1">
</head>

<body>

    <nav>
        <a href="/" class="brand">โฝ ุฏูุฑู ุงูุฎูุงุณู</a>
        <ul>
            {% if league %}
            <li><a href="/l/{{ league.slug }}"><span class="icon">๐</span><span class="text">ุงูุชุฑุชูุจ</span></a></li>
            <li><a href="/l/{{ league.slug }}/matches"><span class="icon">๐</span><span
                        class="text">ุงููุจุงุฑูุงุช</span></a></li>
            <li><a href="/l/{{ league.slug }}/cup"><span class="icon">๐</span><span class="text">ุงููุฃุณ</span></a></li>
            <li><a href="/l/{{ league.slug }}/hall-of-fame"><span class="icon">๐๏ธ</span><span
                        class="text">ุงูุดุฑู</span></a></li>
            <li><a href="#" onclick="showRulesModal(event)"><span class="icon">๐</span><span
                        class="text">ุงูููุงุนุฏ</span></a></li>
            <li><a href="/l/{{ league.slug }}/admin" class="admin-link"><span class="icon">๐ก๏ธ</span><span
                        class="text">ุงูุฅุฏุงุฑุฉ</span></a></li>
            {% else %}
            <li><a href="/"><span class="icon">๐</span><span class="text">ุงูุฑุฆูุณูุฉ</span></a></li>
            {% endif %}
            <li>
                <button id="theme-toggle" class="icon-btn" aria-label="ุชุจุฏูู ุงููุถุน ุงููููู">๐</button>
            </li>
        </ul>
    </nav>

    <main class="container">
        {% block content %}{% endblock %}
    </main>

    <!-- Auto-wrap all tables to guarantee mobile responsiveness (horizontal swipe) without editing every child template -->
    <script src="/static/js/main.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Generic Modal -->
    <div id="global-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 id="modal-title" class="mb-1"></h3>
            <div id="modal-body"></div>
            <div class="modal-actions flex-between gap-3">
                <button id="modal-cancel-btn" class="btn btn-secondary" style="flex:1;">ุฅูุบุงุก</button>
                <button id="modal-confirm-btn" class="btn btn-danger" style="flex:1;">ุชุฃููุฏ</button>
            </div>
        </div>
    </div>

    <!-- Rules Modal -->
    <div id="rules-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <div class="modal-header flex-between mb-1" style="align-items: center;">
                <h3 class="m-0" style="color: var(--primary-color);">๐ ูุธุงู ุญุณุงุจ ุงูููุงุท</h3>
                <button class="icon-btn text-muted" onclick="closeRulesModal()"
                    style="font-size: 1.5rem; line-height: 1; padding: 0;">&times;</button>
            </div>
            <div class="rules-body">
                <p class="mb-1 text-muted" style="font-size: 0.95rem; line-height: 1.5;">ููู ุชูุญุณุจ ุงูููุงุท ููู ูุงุนุจ ุจูุงุกู
                    ุนูู ุฃุฏุงุฆู ูู ุงููุจุงุฑุงุฉุ ุงูุฅุฌุงุจุฉ ูู ูุฐุง ุงูุฌุฏูู:</p>

                <div class="rules-table-container mb-2">
                    <table class="rules-table">
                        <thead>
                            <tr>
                                <th>ุงูุญุฏุซ</th>
                                <th>ูุงุนุจ</th>
                                <th>ุญุงุฑุณ</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>โฝ ูุฏู</td>
                                <td>+3</td>
                                <td>+6</td>
                            </tr>
                            <tr>
                                <td>๐ ุฃุณูุณุช</td>
                                <td>+2</td>
                                <td>+4</td>
                            </tr>
                            <tr>
                                <td>๐ ููุฒ</td>
                                <td>+2</td>
                                <td>+2</td>
                            </tr>
                            <tr>
                                <td>๐ค ุชุนุงุฏู</td>
                                <td>+1</td>
                                <td>+1</td>
                            </tr>
                            <tr class="highlight-gk">
                                <td>๐ก๏ธ ูููู ุดูุช</td>
                                <td class="text-muted">โ</td>
                                <td>+10</td>
                            </tr>
                            <tr class="highlight-gk">
                                <td>โ 3 ุชุตุฏูุงุช</td>
                                <td class="text-muted">โ</td>
                                <td>+1</td>
                            </tr>
                            <tr class="highlight-gk">
                                <td>โ 3 ุฃูุฏุงู ุนููู</td>
                                <td class="text-muted">โ</td>
                                <td style="color: var(--danger-color); font-weight: bold;">-1</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <div class="bps-rule card p-1 mb-1"
                    style="background: var(--surface-color); border-right: 4px solid var(--warning-color); padding-right: 15px;">
                    <h4 class="m-0 mb-sm" style="color: var(--warning-color); font-size: 1.1rem;">๐ ูุฌูู ุงููุจุงุฑุงุฉ (BPS)
                    </h4>
                    <p class="m-0 text-sm" style="line-height: 1.5;">ูุญุตู ุฃูุถู ุซูุงุซ ูุงุนุจูู ุชุฃุซูุฑุงู ูู ุงููุจุงุฑุงุฉ ุชููุงุฆูุงู
                        ุนูู ููุงุท ุฅุถุงููุฉ:
                        <br><strong>๐ฅ ุงููุฑูุฒ ุงูุฃูู: +3</strong> | <strong>๐ฅ ุงููุฑูุฒ ุงูุซุงูู: +2</strong> | <strong>๐ฅ
                            ุงููุฑูุฒ ุงูุซุงูุซ: +1</strong>
                    </p>
                </div>

                <div class="min-points-rule card p-1"
                    style="background: var(--surface-color); border-right: 4px solid var(--text-muted); padding-right: 15px;">
                    <p class="m-0 text-sm" style="line-height: 1.5;">โ๏ธ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ ูุฃู ูุงุนุจ <strong>ูุง ูููู ุฃู ุชูู
                            ุนู 0</strong>ุ ุญุชู ูู ูุงูุช ุงูุฎุตููุงุช ุฃูุจุฑ ูู ููุงุทู ุงูููุฌุจุฉ.</p>
                </div>
            </div>
            <div class="modal-actions mt-2">
                <button class="btn btn-primary" style="width: 100%; border-radius: var(--radius-lg); font-weight: bold;"
                    onclick="closeRulesModal()">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container"></div>


</body>

</html>