{% extends "base.html" %}

{% block content %}
<div class="cup-container" style="max-width: 800px; margin: 0 auto; padding-bottom: 50px;">
    <h1 style="text-align: center; margin-bottom: 2rem;">ğŸ† ÙƒØ£Ø³ Ø§Ù„Ø´Ù‡Ø± (Head-to-Head)</h1>

    {% if matchups %}
    <div class="cup-bracket">
        {% set current_round = None %}
        {% for matchup in matchups %}
        {% if current_round != matchup.round_name %}
        <h2
            style="background: #2c3e50; color: white; padding: 10px; border-radius: 8px; margin-top: 30px; font-size: 1.2rem; text-align: center;">
            {{ matchup.round_name }}
        </h2>
        {% set current_round = matchup.round_name %}
        {% endif %}

        <div class="matchup-card {% if matchup.is_active %}active-matchup{% else %}resolved-matchup{% endif %}"
            style="background: white; border-radius: 12px; margin-bottom: 15px; padding: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); display: flex; align-items: center; justify-content: space-between;">

            <div class="player player1 {% if not matchup.is_active and matchup.winner_id != matchup.player1_id %}loser{% endif %}"
                style="flex: 1; text-align: center;">
                <div class="player-name {% if matchup.winner_id == matchup.player1_id %}winner-name{% endif %}"
                    style="font-weight: bold; font-size: 1.2rem;">
                    {{ matchup.player1.name }}
                    {% if matchup.winner_id == matchup.player1_id %} ğŸ† {% endif %}
                </div>
                <div style="font-size: 0.9rem; color: #666;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·: {{ matchup.player1.total_points }}</div>
            </div>

            <div class="vs" style="padding: 0 20px; font-weight: bold; text-align: center;">
                {% if matchup.is_active %}
                <span class="vs-badge active-vs">VS<br><small>Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±</small></span>
                {% else %}
                <span class="vs-badge resolved-vs">Ø§Ù†ØªÙ‡Øª</span>
                {% endif %}
            </div>

            <div class="player player2 {% if not matchup.is_active and matchup.winner_id != matchup.player2_id %}loser{% endif %}"
                style="flex: 1; text-align: center;">
                <div class="player-name {% if matchup.winner_id == matchup.player2_id %}winner-name{% endif %}"
                    style="font-weight: bold; font-size: 1.2rem;">
                    {% if matchup.winner_id == matchup.player2_id %} ğŸ† {% endif %}
                    {{ matchup.player2.name }}
                </div>
                <div style="font-size: 0.9rem; color: #666;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù†Ù‚Ø§Ø·: {{ matchup.player2.total_points }}</div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 3rem; color: #666; background: white; border-radius: 12px;">
        <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù‚Ø±Ø¹Ø© Ù†Ø´Ø·Ø© Ø­Ø§Ù„ÙŠØ§Ù‹. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù„Ø­ÙŠÙ† Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙˆØ³Ù… Ø§Ù„Ø¬Ø¯ÙŠØ¯!</p>
    </div>
    {% endif %}

    <div
        style="margin-top: 40px; padding: 20px; background: #e8f4fd; border-radius: 8px; border-right: 5px solid #3498db;">
        <h4 style="margin-top: 0;">ğŸ“œ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙƒØ£Ø³:</h4>
        <ul style="font-size: 0.9rem; margin-bottom: 0; padding-right: 20px;">
            <li>ÙŠØªÙ… ØªØ£Ù‡ÙŠÙ„ Ø£Ø¹Ù„Ù‰ 10 Ù„Ø§Ø¹Ø¨ÙŠÙ† ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø§Ù….</li>
            <li>Ø§Ù„Ù…ÙˆØ§Ø¬Ù‡Ø§Øª ØªØªÙ… Ø¨Ù†Ø¸Ø§Ù… Ø®Ø±ÙˆØ¬ Ø§Ù„Ù…ØºÙ„ÙˆØ¨ (Head-to-Head).</li>
            <li><strong>ÙŠØªÙ… Ø­Ø³Ù… Ø§Ù„Ù…ÙˆØ§Ø¬Ù‡Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹</strong> Ù…ØªÙ‰ Ù„Ø¹Ø¨ Ø§Ù„Ø·Ø±ÙØ§Ù† Ù…Ø¹Ø§Ù‹ ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¨Ø§Ø±Ø§Ø©ØŒ ÙˆØ§Ù„Ù†Ù‚Ø·Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰ ØªÙ‚Ø±Ø±
                Ø§Ù„ÙØ§Ø¦Ø²!</li>
            <li>ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„ØªØ¹Ø§Ø¯Ù„ ÙÙŠ Ù…ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙƒØ£Ø³ØŒ ÙŠØªØ£Ù‡Ù„ ØµØ§Ø­Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ø£Ø¹Ù„Ù‰ ÙÙŠ Ø§Ù„ØªØ±ØªÙŠØ¨ Ø§Ù„Ø¹Ø§Ù… Ù„Ø­Ø³Ù… Ø§Ù„Ù…ÙˆÙ‚Ù.</li>
        </ul>
    </div>
</div>

<style>
    @keyframes pulse {
        0% {
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(231, 76, 60, 0.7);
        }

        70% {
            transform: scale(1.05);
            box-shadow: 0 0 0 10px rgba(231, 76, 60, 0);
        }

        100% {
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(231, 76, 60, 0);
        }
    }

    .active-matchup {
        border-right: 5px solid #f39c12;
    }

    .resolved-matchup {
        border-right: 5px solid #27ae60;
    }

    .loser {
        opacity: 0.5;
        filter: grayscale(100%);
    }

    .player-name {
        color: #2c3e50;
    }

    .winner-name {
        color: #27ae60;
    }

    .vs-badge {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
    }

    .active-vs {
        background: #e74c3c;
        color: white;
        font-size: 0.9rem;
        animation: pulse 2s infinite;
    }

    .resolved-vs {
        color: #7f8c8d;
        font-size: 1.2rem;
    }
</style>
{% endblock %}